<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Play — <%= challenge?.title %> | ForensiX</title>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body class="black">

  <nav class="nav-wrapper black">
    <div class="container">
      <a href="/" class="brand-logo teal-text text-accent-2">ForensiX</a>
      <a href="#" data-target="mobile-menu" class="sidenav-trigger"><i class="material-icons">menu</i></a>
      <ul class="right hide-on-med-and-down">
        <li><a href="/">Home</a></li>
        <li><a href="/challenges">Challenges</a></li>
      </ul>
    </div>
  </nav>
  <ul class="sidenav" id="mobile-menu">
    <li><a href="/">Home</a></li>
    <li><a href="/challenges">Challenges</a></li>
  </ul>

  <section class="section">
    <div class="container">
      <div class="row">
        <div class="col s12 m8">
          <div class="card hoverable">
            <div class="card-content">
              <span class="card-title"><%= challenge.title %></span>
              <p class="grey-text">Difficulty: <%= challenge.difficulty || 'N/A' %>
                <% if (challenge.category) { %> • Category: <%= challenge.category %><% } %>
              </p>
              <p class="flow-text" style="margin-top:12px;"><%= challenge.description || '' %></p>

              <% if (challenge.image) { %>
                <img src="<%= challenge.image %>" alt="<%= challenge.title %>" class="responsive-img" style="margin-top:16px;">
              <% } %>

              <% if (challenge.solutionSteps && challenge.solutionSteps.length) { %>
                <ul class="collection" style="margin-top:16px;">
                  <% challenge.solutionSteps.forEach(step => { %>
                    <li class="collection-item black"><i class="material-icons left">chevron_right</i><%= step %></li>
                  <% }) %>
                </ul>
              <% } %>
            </div>
          </div>
        </div>

        <div class="col s12 m4">
          <div class="card hoverable">
            <div class="card-content">
              <span class="card-title">Submit Flag</span>
              <form method="POST" action="/submit/<%= challenge._id || challenge.id %>">
                <div class="input-field">
                  <i class="material-icons prefix">flag</i>
                  <input id="flag" name="flag" type="text" required placeholder="flag{...}">
                  <label for="flag">Flag</label>
                </div>
                <button class="btn waves-effect waves-light teal" type="submit">
                  <i class="material-icons left">check_circle</i> Submit
                </button>
                <a href="/challenges" class="btn-flat right">Back</a>
              </form>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded',()=>M.Sidenav.init(document.querySelectorAll('.sidenav')));</script>
</body>
</html>
